"use strict";(self["webpackChunkvue_losev_frontend"]=self["webpackChunkvue_losev_frontend"]||[]).push([[278],{7278:function(t,s,e){e.r(s),e.d(s,{default:function(){return Y}});var a=e(3396),o=e(7139),l=e(9242);const i=(0,a._)("div",{class:"page_title"},[(0,a._)("p",null," Всі подкасти ")],-1),c={class:"all-podcast-block"},r={class:"dropdown-container"},n={class:"dropdown"},d=(0,a._)("span",null,"Сортування:",-1),p=(0,a._)("span",{class:"left-bar"},null,-1),g=(0,a._)("span",{class:"right-bar"},null,-1),_=[p,g],u={class:"dropdown-content"},h={class:"dropdown"},v=(0,a._)("span",null,"Фільтр:",-1),w={class:"selected-item-filter"},f=(0,a._)("span",{class:"left-bar"},null,-1),y=(0,a._)("span",{class:"right-bar"},null,-1),b=[f,y],k={class:"dropdown-content dropdown-filter"},P={class:"block_content_podcast"},m={class:"positions_in_block"},C={class:"upper_tittle"},F={class:"context"},z=(0,a._)("svg",{class:"play-icon",xmlns:"http://www.w3.org/2000/svg",height:"1em",viewBox:"0 0 512 512"},[(0,a._)("path",{class:"play-path",d:"M0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zM188.3 147.1c-7.6 4.2-12.3 12.3-12.3 20.9V344c0 8.7 4.7 16.7 12.3 20.9s16.8 4.1 24.3-.5l144-88c7.1-4.4 11.5-12.1 11.5-20.5s-4.4-16.1-11.5-20.5l-144-88c-7.4-4.5-16.7-4.7-24.3-.5z"})],-1),T=[z],V={class:"info_podcast"},B={class:"title_podcast"},S={class:"author_podcast"},A=(0,a._)("span",{class:"time_podcast"}," 55:15 ",-1),D={class:"under_title"},L={class:"rating_and_categories"},M={class:"podcast-rating"},N={class:"categories_podcast"},x=["onClick"];function H(t,s,e,p,g,f){return(0,a.wg)(),(0,a.iD)(a.HY,null,[i,(0,a._)("div",c,[(0,a._)("div",r,[(0,a._)("div",n,[d,(0,a._)("div",{class:"selected-item-name",onClick:s[0]||(s[0]=t=>f.toggleDropdown("name"))},[(0,a._)("span",null,(0,o.zw)(g.sortDisplayNames[g.sortType]),1),(0,a._)("a",{class:(0,o.C_)(["arrow-icon",{open:g.dropdowns.name}])},_,2)]),(0,a.wy)((0,a._)("div",u,[(0,a._)("a",{href:"#",onClick:s[1]||(s[1]=t=>f.sortPodcasts("default"))},"За замовчуванням"),(0,a._)("a",{href:"#",onClick:s[2]||(s[2]=t=>f.sortPodcasts("title"))},"За назвою"),(0,a._)("a",{href:"#",onClick:s[3]||(s[3]=t=>f.sortPodcasts("rating"))},"За популярністю")],512),[[l.F8,g.dropdowns.name]])]),(0,a._)("div",h,[v,(0,a._)("div",{class:"selected-item-category",onClick:s[4]||(s[4]=t=>f.toggleDropdown("filterPrice"))},[(0,a._)("span",w,(0,o.zw)(g.selectedFilterPrice),1),(0,a._)("a",{class:(0,o.C_)(["arrow-icon",{open:g.dropdowns.filterPrice}])},b,2)]),(0,a.wy)((0,a._)("div",k,[(0,a._)("a",{href:"#",onClick:s[5]||(s[5]=t=>f.filterByPriceType("all"))},"Всі подкасти"),(0,a._)("a",{href:"#",onClick:s[6]||(s[6]=t=>f.filterByPriceType("free"))},"Безкоштовні"),(0,a._)("a",{href:"#",onClick:s[7]||(s[7]=t=>f.filterByPriceType("paid"))},"Платні")],512),[[l.F8,g.dropdowns.filterPrice]])])]),(0,a._)("div",P,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(g.podcasts,(t=>(0,a.wy)(((0,a.wg)(),(0,a.iD)("div",{key:t.id,class:(0,o.C_)(["podcast",`id_${t.id}`]),style:(0,o.j5)({backgroundImage:`url(${t.image_url})`,backgroundRepeat:"no-repeat",backgroundPosition:"center"})},[(0,a._)("div",m,[(0,a._)("div",C,[(0,a._)("div",F,[(0,a._)("button",{class:"play-button","aria-label":"Play podcast",onClick:s[8]||(s[8]=(...t)=>f.handlePlayButtonClick&&f.handlePlayButtonClick(...t))},T),(0,a._)("div",V,[(0,a._)("span",B,(0,o.zw)(f.truncateTitle(t.title)),1),(0,a._)("span",S,(0,o.zw)(t.author),1)])]),A]),(0,a._)("div",D,[(0,a._)("div",L,[(0,a._)("div",M,(0,o.zw)(t.rating),1),(0,a._)("span",N,(0,o.zw)(t.categories[0].name),1)]),(0,a._)("button",{class:(0,o.C_)(["heart-button",t.isFavorite?"active":""]),"aria-label":"favorite",onClick:s=>f.handleHeartButtonClick(t,s)},null,10,x)])])],6)),[[l.F8,t.isVisible]]))),128))])])],64)}var J=e(3258),O=e(5797),Z=e.n(O),q={name:"AllPodcastPage",data(){return{podcasts:[],loading:!1,dropdowns:{name:!1,filterPrice:!1},sortType:"default",allcategories:[],selectedFilterPrice:"Всі подкасти",sortDisplayNames:{default:"За замовчуванням",title:"За назвою",rating:"За популярністю"},initialPodcasts:[]}},methods:{async handleHeartButtonClick(t,s){t.isFavorite=!t.isFavorite,console.log(t.isFavorite),s.target.classList.toggle("active");const e=localStorage.getItem("token");try{const s=await J.Z.addAndRemoveToFavorite(e,t.id,`${t.isFavorite}`);!0===s.data?console.log("Операція успішна",s):s.error&&s.error.message&&"You need to login before continue"===s.error.message?Z().toast({html:"Ви не авторизовані"}):console.error("Отримана неочікувана відповідь з сервера:",s)}catch(a){console.error("Помилка при додаванні або видаленні з улюблених:",a)}},handlePlayButtonClick(t){let s=t.target.closest(".positions_in_block");s.classList.toggle("active");let e=t.target.closest(".podcast");e.classList.toggle("active");const a=e.querySelector(".context");a.classList.toggle("reversed");const o=e.querySelector(".play-button");o.classList.toggle("expanded");let l=t.target.querySelector(".play-path");l&&(s.classList.contains("active")?l.setAttribute("d","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM224 192V320c0 17.7-14.3 32-32 32s-32-14.3-32-32V192c0-17.7 14.3-32 32-32s32 14.3 32 32zm128 0V320c0 17.7-14.3 32-32 32s-32-14.3-32-32V192c0-17.7 14.3-32 32-32s32 14.3 32 32z"):l.setAttribute("d","M0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zM188.3 147.1c-7.6 4.2-12.3 12.3-12.3 20.9V344c0 8.7 4.7 16.7 12.3 20.9s16.8 4.1 24.3-.5l144-88c7.1-4.4 11.5-12.1 11.5-20.5s-4.4-16.1-11.5-20.5l-144-88c-7.4-4.5-16.7-4.7-24.3-.5z"))},async toggleDropdown(t){console.log("Toggle dropdown called with:",t),this.dropdowns[t]=!this.dropdowns[t]},sortPodcasts(t){this.sortType=t,"title"===t?(console.log("Сортування по тайтл ",t),this.podcasts.sort(((t,s)=>t.title.localeCompare(s.title)))):"rating"===t?(console.log("Сортування по рейтингу ",t),this.podcasts.sort(((t,s)=>s.rating-t.rating))):"default"===t&&(console.log("Сортування за замовчуванням"),this.podcasts=JSON.parse(JSON.stringify(this.initialPodcasts)),this.podcasts.forEach((t=>t.isVisible=!0)))},filterByPriceType(t){"all"===t?(this.podcasts.forEach((t=>t.isVisible=!0)),this.selectedFilterPrice="Всі подкасти"):"free"!==t&&"paid"!==t||(this.podcasts.forEach((s=>{s.categories[0].category_type===t?s.isVisible=!0:s.isVisible=!1})),this.selectedFilterPrice="free"===t?"Безкоштовні":"Платні")},truncateTitle(t){return t.length>14?t.substring(0,14)+"...":t}},async created(){this.loading=!0;const t=localStorage.getItem("token"),s=await J.Z.getFavoritePodcasts(t),e=s.data?s.data.map((t=>t.id)):[];console.log(e);const a=await J.Z.AllPodcastPage();a&&a.data&&a.data.data&&(this.podcasts=a.data.data.map((t=>({...t,isVisible:!0,isFavorite:e.includes(t.id)}))),this.initialPodcasts=JSON.parse(JSON.stringify(this.podcasts)),this.sortPodcasts(this.sortType))}},E=e(89);const I=(0,E.Z)(q,[["render",H]]);var Y=I}}]);
//# sourceMappingURL=278.ee11561e.js.map