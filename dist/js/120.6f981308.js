"use strict";(self["webpackChunkvue_losev_frontend"]=self["webpackChunkvue_losev_frontend"]||[]).push([[120],{120:function(a,e,l){l.r(e),l.d(e,{default:function(){return S}});var i=l(3396),s=l(7139),t=l(9242);const r={class:"empty-layout"},d={class:"card-content"},n=(0,i._)("span",{class:"card-title"},"Реєстрація Losev Formulas",-1),o={class:"input-field"},v=(0,i._)("label",{for:"email"},"E-mail",-1),u={key:0,class:"helper-text invalid"},m={key:1,class:"helper-text invalid"},c={class:"input-field"},p=["type"],$=(0,i._)("label",{for:"password"},"Пароль",-1),w={key:0,class:"helper-text invalid"},g={key:1,class:"helper-text invalid"},y={class:"input-field"},_=(0,i._)("label",{for:"name"},"Ваше ім'я",-1),h={key:0,class:"helper-text invalid"},k=(0,i._)("span",null,"Згода на обробку персональних даних",-1),f={class:"card-action"},b=(0,i._)("div",{class:"butt_register"},[(0,i._)("button",{class:"btn waves-effect waves-light auth-submit",type:"submit"}," Зареєструватися ")],-1),C={class:"center under_butt_auth"};function q(a,e,l,q,x,H){const D=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",{class:(0,s.C_)(x.backgroundClass)},[(0,i._)("div",r,[(0,i._)("form",{class:"card auth-card",onSubmit:e[5]||(e[5]=(0,t.iM)(((...a)=>q.submitHandler&&q.submitHandler(...a)),["prevent"]))},[(0,i._)("div",d,[n,(0,i._)("div",o,[(0,i.wy)((0,i._)("input",{id:"email",type:"text","onUpdate:modelValue":e[0]||(e[0]=a=>q.email=a),class:(0,s.C_)({invalid:q.v$.email.$dirty&&q.v$.email.required.$invalid||q.v$.email.$dirty&&q.v$.email.email.$invalid,validate:q.v$.email.$dirty&&!q.v$.email.required.$invalid&&!q.v$.email.email.$invalid})},null,2),[[t.nr,q.email,void 0,{trim:!0}]]),v,q.v$.email.$dirty&&q.v$.email.required.$invalid?((0,i.wg)(),(0,i.iD)("small",u,"Поле E-mail не може бути пустим")):q.v$.email.$dirty&&q.v$.email.email.$invalid?((0,i.wg)(),(0,i.iD)("small",m,"Введіть коректний E-mail")):(0,i.kq)("",!0)]),(0,i._)("div",c,[(0,i.wy)((0,i._)("input",{id:"password",type:q.isPasswordVisible?"text":"password","onUpdate:modelValue":e[1]||(e[1]=a=>q.password=a),class:(0,s.C_)({invalid:q.v$.password.$dirty&&q.v$.password.required.$invalid||q.v$.password.$dirty&&!q.v$.password.minLength.$invalid,validate:q.v$.password.$dirty&&!q.v$.password.required.$invalid&&!q.v$.password.minLength.$invalid})},null,10,p),[[t.YZ,q.password,void 0,{trim:!0}]]),$,q.v$.password.$dirty&&q.v$.password.required.$invalid?((0,i.wg)(),(0,i.iD)("small",w,"Введіть пароль")):q.v$.password.$dirty&&q.v$.password.minLength.$invalid?((0,i.wg)(),(0,i.iD)("small",g,"Пароль повинен бути "+(0,s.zw)(q.v$.password.minLength.$params.min)+" символів. Зараз він "+(0,s.zw)(q.password.length),1)):(0,i.kq)("",!0),(0,i._)("i",{class:(0,s.C_)(["toggle-password",q.passwordIconClass]),onClick:e[2]||(e[2]=(...a)=>q.togglePassword&&q.togglePassword(...a))},null,2)]),(0,i._)("div",y,[(0,i.wy)((0,i._)("input",{id:"name",type:"text","onUpdate:modelValue":e[3]||(e[3]=a=>q.name=a),class:(0,s.C_)({invalid:q.v$.name.$dirty&&q.v$.name.required.$invalid,validate:q.v$.name.$dirty&&!q.v$.name.required.$invalid})},null,2),[[t.nr,q.name,void 0,{trim:!0}]]),_,q.v$.name.$dirty&&q.v$.name.required.$invalid?((0,i.wg)(),(0,i.iD)("small",h,"Введіть ваше ім'я")):(0,i.kq)("",!0)]),(0,i._)("p",null,[(0,i._)("label",null,[(0,i.wy)((0,i._)("input",{type:"checkbox","onUpdate:modelValue":e[4]||(e[4]=a=>x.agree=a)},null,512),[[t.e8,x.agree]]),k])])]),(0,i._)("div",f,[b,(0,i._)("p",C,[(0,i.Uk)(" Вже є аккаунт? "),(0,i.Wm)(D,{to:"/login"},{default:(0,i.w5)((()=>[(0,i.Uk)("Увійти")])),_:1})])])],32)])],2)}l(7658);var x=l(4870),H=l(4219),D=l(5420),P=l(2483),U=l(3258),L=l(5797),V=l.n(L),E={name:"RegisterPage",data(){return{backgroundClass:null,agree:!1}},setup(){const a=localStorage.removeItem("token");console.log("token now "+a);const e=(0,x.iH)(""),l=(0,x.iH)(""),i=(0,x.iH)(""),s=(0,P.tv)(),t=(0,H.ZP)(),r=async()=>{if(t.value.$invalid)return t.value.$touch(),void console.log("click to submitHandler");const a={email:e.value,password:l.value,name:i.value};console.log(a);try{const a=await U.Z.registerUser(e.value,l.value,i.value);a.data.data&&a.data.data.id?(a.data.data.token&&localStorage.setItem("token",a.data.data.token),s.push("/")):V().toast({html:"Реєстрація не вдалася"})}catch(r){r.response&&422===r.response.status?r.response.data.errors.email?V().toast({html:"[Помилка]: Електронна пошта вже використовується"}):V().toast({html:"[Помилка]: Реєстрація не вдалася"}):V().toast({html:"[Помилка]: Помилка під час реєстрації:",error:r})}},d=(0,x.iH)(!1),n=(0,x.iH)("fas fa-eye-slash"),o=()=>{d.value=!d.value,d.value?n.value="fas fa-eye":n.value="fas fa-eye-slash"};return{v$:t,submitHandler:r,isPasswordVisible:d,togglePassword:o,passwordIconClass:n,email:e,password:l,name:i}},validations(){return{email:{required:D.C1,email:D.Do},password:{required:D.C1,minLength:(0,D.Ei)(6)},name:{required:D.C1},agree:{checked:a=>a}}},created(){this.backgroundClass=(0,i.f3)("backgroundClass")}},I=l(89);const Z=(0,I.Z)(E,[["render",q]]);var S=Z}}]);
//# sourceMappingURL=120.6f981308.js.map