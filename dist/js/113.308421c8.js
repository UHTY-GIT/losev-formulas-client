"use strict";(self["webpackChunkvue_losev_frontend"]=self["webpackChunkvue_losev_frontend"]||[]).push([[113],{4113:function(t,e,s){s.r(e),s.d(e,{default:function(){return st}});var o=s(3396),a=s(7139),i=s(9242);const l=(0,o._)("div",{class:"page_title"},[(0,o._)("p",null," Всі подкасти ")],-1),c={class:"all-podcast-block"},n={class:"dropdown-container"},d={class:"dropdown"},r=(0,o._)("span",null,"Сортування:",-1),p=(0,o._)("span",{class:"left-bar"},null,-1),h=(0,o._)("span",{class:"right-bar"},null,-1),u=[p,h],g={class:"dropdown-content"},y={class:"dropdown"},m=(0,o._)("span",null,"Фільтр:",-1),v={class:"selected-item-filter"},P=(0,o._)("span",{class:"left-bar"},null,-1),_=(0,o._)("span",{class:"right-bar"},null,-1),w=[P,_],f={class:"dropdown-content dropdown-filter"},k={key:0,class:"loading"},b={key:1,class:"block_content_podcast"},z={key:0,class:"blocked-overlay"},C=(0,o._)("svg",{class:"lock-icon",xmlns:"http://www.w3.org/2000/svg",height:"1em",viewBox:"0 0 448 512"},[(0,o._)("path",{d:"M144 144v48H304V144c0-44.2-35.8-80-80-80s-80 35.8-80 80zM80 192V144C80 64.5 144.5 0 224 0s144 64.5 144 144v48h16c35.3 0 64 28.7 64 64V448c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V256c0-35.3 28.7-64 64-64H80z"})],-1),A=["onClick"],S={class:"positions_in_block"},F={class:"upper_tittle"},L={class:"context"},$=["disabled","onClick"],q={class:"play-icon",xmlns:"http://www.w3.org/2000/svg",height:"1em",viewBox:"0 0 512 512"},D=["d"],V={class:"info_podcast"},x={class:"title_podcast"},B={class:"author_podcast"},M={class:"time_podcast"},T={class:"under_title"},I={class:"rating_and_categories"},E={class:"podcast-rating"},O={class:"categories_podcast"},H=["onClick"],Z={key:0,class:"payment-popup"},N={class:"payment-popup-content"},J=(0,o._)("p",null,"Виберіть метод оплати",-1),Y={class:"container_payment"},U={class:"ones_payment_metod"},R=(0,o._)("svg",{class:"payment-logo",xmlns:"http://www.w3.org/2000/svg",viewBox:"119.5 203.6 221 28.8"},[(0,o._)("path",{fill:"red",d:"M119.5 207.7h4.5v2.6c1.3-1.9 3.4-3.1 5.7-3 2.1 0 4.1.9 5.4 2.5 1.5 1.6 2.2 3.9 2.2 6.8 0 3-.7 5.3-2.2 7-1.4 1.6-3.3 2.5-5.4 2.5-.9 0-1.9-.2-2.7-.6-1-.5-1.9-1.2-2.6-2v9h-4.9v-24.8zm4.8 8.6c0 2 .4 3.5 1.2 4.5.7.9 1.8 1.5 3 1.4 1.1 0 2.1-.5 2.8-1.3.7-.9 1.1-2.3 1.1-4.3 0-1.9-.4-3.3-1.2-4.2-.7-.9-1.7-1.4-2.9-1.4-1.1 0-2.2.5-2.9 1.3-.7.9-1.1 2.3-1.1 4zm14.9.1c0-1.6.4-3.2 1.2-4.6.8-1.4 1.9-2.6 3.4-3.4 1.5-.8 3.2-1.2 4.9-1.2 2.5-.1 5 .9 6.8 2.6 1.8 1.8 2.7 4.2 2.7 6.7.1 5.1-3.8 9.3-8.9 9.4h-.5c-1.7 0-3.3-.4-4.8-1.1-1.5-.7-2.7-1.8-3.5-3.3-1-1.5-1.4-3.3-1.3-5.1zm5 .2c0 1.8.4 3.1 1.3 4.1 1.6 1.8 4.3 1.9 6 .3l.3-.3c.9-.9 1.3-2.3 1.3-4.1 0-1.8-.4-3.1-1.3-4.1-1.6-1.8-4.3-1.9-6-.3l-.3.3c-.9 1-1.3 2.3-1.3 4.1zm38.4-8.9v3.8h-3.3v7.2c0 .9 0 1.7.1 2.6.1.2.2.5.4.6.2.2.5.2.8.2.7 0 1.3-.2 1.9-.5l.4 3.7c-1.2.5-2.5.7-3.8.7-.8 0-1.6-.1-2.4-.4-.6-.2-1.1-.6-1.5-1.1-.4-.6-.6-1.2-.7-1.8-.1-1.1-.2-2.2-.2-3.3v-7.8h-2.2v-3.8h2.2v-2.4l4.9-1.6v4.1h3.4v-.2zm2.6 0h4.5v2.5c1.6-1.9 3.5-2.9 5.7-2.9 1.1 0 2.1.2 3.1.7.9.5 1.6 1.2 2.1 2.1.7-.9 1.6-1.6 2.6-2.1.9-.5 2-.7 3-.7 1.2 0 2.4.2 3.4.8.9.5 1.7 1.4 2.1 2.4.3.8.5 2 .5 3.7v11.5h-4.9v-10.3c0-1.8-.2-2.9-.5-3.4-.5-.7-1.3-1.1-2.1-1-1.5 0-2.8 1-3.2 2.4-.3 1.2-.5 2.5-.4 3.7v8.6h-4.9v-9.8c0-1.7-.1-2.9-.3-3.4-.1-.5-.4-.9-.8-1.1-.4-.3-1-.4-1.5-.4-.7 0-1.4.2-2 .6-.6.4-1.1 1-1.3 1.7-.3 1.2-.4 2.5-.4 3.7v8.7H185l.2-18zm28.8 8.7c0-1.6.4-3.2 1.2-4.6.8-1.4 1.9-2.6 3.4-3.4 1.5-.8 3.2-1.2 4.9-1.2 2.8 0 5 .9 6.8 2.6 1.8 1.8 2.7 4.2 2.7 6.7.1 5.1-3.8 9.3-8.9 9.4h-.5c-1.7 0-3.3-.4-4.8-1.1-1.5-.7-2.7-1.8-3.5-3.3-.9-1.5-1.3-3.3-1.3-5.1zm5 .2c0 1.8.4 3.1 1.3 4.1 1.6 1.8 4.3 1.9 6 .3l.3-.3c.9-.9 1.3-2.3 1.3-4.1 0-1.8-.4-3.1-1.3-4.1-1.6-1.8-4.3-1.9-6-.3l-.3.3c-.9 1-1.3 2.3-1.3 4.1zm32.5 9h-4.8v-9.2c0-1.9-.1-3.2-.3-3.8-.2-.5-.5-1-1-1.3-.5-.3-1.1-.5-1.7-.5-.8 0-1.6.2-2.3.7-.6.4-1.1 1.1-1.4 1.8-.2.7-.4 2.1-.4 4.1v8.1h-4.9v-17.9h4.5v2.6c1.4-1.9 3.7-3.1 6-3 1 0 2 .2 2.9.6.8.3 1.5.8 2 1.4.5.6.8 1.3.9 2 .2 1.1.3 2.1.3 3.2l.2 11.2zm14.4-5.7l4.8.8c-.5 1.6-1.6 3-2.9 4-1.5 1-3.3 1.4-5 1.4-3.2 0-5.5-1-7.1-3.1-1.2-1.6-1.8-3.7-1.8-6.2 0-3 .8-5.3 2.4-7 1.5-1.7 3.7-2.6 6-2.5 2.7 0 4.9.9 6.4 2.6 1.6 1.8 2.3 4.5 2.3 8.1h-12.1c0 1.2.4 2.4 1.2 3.3.7.8 1.7 1.2 2.8 1.2.7 0 1.4-.2 1.9-.6.5-.6.9-1.3 1.1-2zm.3-4.8c0-1.4-.4-2.4-1.1-3.1-1.4-1.4-3.6-1.4-5-.1l-.1.1c-.7.9-1.1 2-1 3.1h7.2zm-97.3-3.2c-2.2 0-3.9 1.4-3.9 4.5v9.3h-4.9v-17.9h4.2v3.1h.1c.9-2.3 2.8-3.5 4.5-3.5.4 0 .7 0 1.1.1v4.5c-.3-.1-.7-.2-1.1-.1z"}),(0,o._)("path",{fill:"#A7A9AB",d:"M273.9 225.4V222h3.5v3.5h-3.5zm18.4-6.5l3.1.4c-.2 1.9-1.1 3.6-2.6 4.8-1.4 1.2-3.2 1.8-5 1.7-2.5 0-4.5-.8-6-2.4-1.5-1.6-2.3-3.9-2.3-6.9 0-1.7.3-3.5 1-5.1.6-1.4 1.6-2.5 3-3.3 1.3-.7 2.8-1.1 4.4-1.1 1.7-.1 3.5.4 4.9 1.5 1.3 1 2.2 2.5 2.4 4.2l-3 .4c-.2-1-.7-2-1.5-2.7-.7-.6-1.7-.9-2.6-.9-1.4-.1-2.8.6-3.8 1.6-1 1.1-1.5 2.8-1.5 5.2 0 2.4.5 4.2 1.4 5.2.9 1.1 2.3 1.7 3.7 1.6 1.1 0 2.2-.4 3-1.1.7-.5 1.2-1.6 1.4-3.1zm4.5-2.4c0-3.3.9-5.8 2.8-7.4 1.6-1.3 3.7-2 5.7-2 2.3-.1 4.5.8 6.2 2.4 1.6 1.6 2.4 3.8 2.4 6.7 0 2.3-.4 4.1-1.1 5.4-.7 1.3-1.8 2.4-3.1 3.1-1.4.7-2.9 1.1-4.4 1.1-2.6 0-4.6-.8-6.2-2.4-1.5-1.6-2.3-3.9-2.3-6.9zm3.2 0c0 2.3.5 4 1.5 5.2 1.9 2.1 5.2 2.3 7.3.4l.4-.4c1-1.2 1.5-2.9 1.5-5.2 0-2.2-.5-3.9-1.5-5-1.9-2.1-5.2-2.3-7.3-.4-.1.1-.3.2-.4.4-1 1-1.5 2.7-1.5 5zm15.7 8.9v-17.9h2.8v2.5c.6-.9 1.4-1.6 2.3-2.1 1-.5 2.1-.8 3.2-.8 1.2 0 2.3.2 3.3.8.9.5 1.5 1.4 1.8 2.3 1.5-2.1 3.3-3.1 5.7-3.1 1.8 0 3.2.5 4.2 1.5s1.5 2.5 1.5 4.5v12.3h-3.1v-11.3c0-.9-.1-1.8-.3-2.6-.2-.5-.6-1-1.1-1.3-.6-.3-1.2-.5-1.9-.5-1.2 0-2.4.4-3.2 1.3-.8.8-1.3 2.2-1.3 4v10.4h-3.1v-11.6c0-1.4-.3-2.4-.8-3-.5-.7-1.3-1-2.5-1-.9 0-1.7.2-2.4.7-.7.5-1.3 1.1-1.6 2-.4 1.2-.6 2.5-.5 3.7v9.3l-3-.1z"})],-1),j={class:"button_payment"};function G(t,e,s,p,h,P){return(0,o.wg)(),(0,o.iD)(o.HY,null,[l,(0,o._)("div",c,[(0,o._)("div",n,[(0,o._)("div",d,[r,(0,o._)("div",{class:"selected-item-name",onClick:e[0]||(e[0]=t=>P.toggleDropdown("name"))},[(0,o._)("span",null,(0,a.zw)(h.sortDisplayNames[h.sortType]),1),(0,o._)("a",{class:(0,a.C_)(["arrow-icon",{open:h.dropdowns.name}])},u,2)]),(0,o.wy)((0,o._)("div",g,[(0,o._)("a",{href:"#",onClick:e[1]||(e[1]=t=>P.sortPodcasts("default"))},"За замовчуванням"),(0,o._)("a",{href:"#",onClick:e[2]||(e[2]=t=>P.sortPodcasts("title"))},"За назвою"),(0,o._)("a",{href:"#",onClick:e[3]||(e[3]=t=>P.sortPodcasts("rating"))},"За популярністю")],512),[[i.F8,h.dropdowns.name]])]),(0,o._)("div",y,[m,(0,o._)("div",{class:"selected-item-category",onClick:e[4]||(e[4]=t=>P.toggleDropdown("filterPrice"))},[(0,o._)("span",v,(0,a.zw)(h.selectedFilterPrice),1),(0,o._)("a",{class:(0,a.C_)(["arrow-icon",{open:h.dropdowns.filterPrice}])},w,2)]),(0,o.wy)((0,o._)("div",f,[(0,o._)("a",{href:"#",onClick:e[5]||(e[5]=t=>P.filterByPriceType("all"))},"Всі подкасти"),(0,o._)("a",{href:"#",onClick:e[6]||(e[6]=t=>P.filterByPriceType("free"))},"Безкоштовні"),(0,o._)("a",{href:"#",onClick:e[7]||(e[7]=t=>P.filterByPriceType("paid"))},"Платні")],512),[[i.F8,h.dropdowns.filterPrice]])])]),h.loading?((0,o.wg)(),(0,o.iD)("div",k,"Завантаження...")):((0,o.wg)(),(0,o.iD)("div",b,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(h.podcasts,(t=>(0,o.wy)(((0,o.wg)(),(0,o.iD)("div",{key:t.id,class:(0,a.C_)(["podcast",`id_${t.id}`,{podcast_blocked:t.blocked}]),style:(0,a.j5)({backgroundImage:`url(${t.image_url})`,backgroundRepeat:"no-repeat",backgroundPosition:"center"})},[t.blocked?((0,o.wg)(),(0,o.iD)("div",z,[C,(0,o._)("button",{class:"buy-button",onClick:e=>P.openPaymentPopup(t.id)},"Купити",8,A)])):(0,o.kq)("",!0),(0,o._)("div",S,[(0,o._)("div",F,[(0,o._)("div",L,[(0,o._)("button",{class:"play-button",disabled:t.blocked,"aria-label":"Play podcast",onClick:e=>!t.blocked&&P.handlePlayButtonClick(t,e)},[((0,o.wg)(),(0,o.iD)("svg",q,[(0,o._)("path",{class:"play-path",d:P.isPlaying&&h.playingPodcast===t.id?h.pausePath:h.playPath},null,8,D)]))],8,$),(0,o._)("div",V,[(0,o._)("span",x,(0,a.zw)(P.truncateTitle(t.title)),1),(0,o._)("span",B,(0,a.zw)(t.author),1)])]),(0,o._)("span",M,(0,a.zw)(t.duration),1)]),(0,o._)("div",T,[(0,o._)("div",I,[(0,o._)("div",E,(0,a.zw)(t.rating),1),(0,o._)("span",O,(0,a.zw)(t.categories[0].name),1)]),(0,o._)("button",{class:(0,a.C_)(["heart-button",t.isFavorite?"active":""]),"aria-label":"favorite",onClick:e=>P.handleHeartButtonClick(t)},null,10,H)])])],6)),[[i.F8,t.isVisible]]))),128))]))]),h.showPaymentPopup?((0,o.wg)(),(0,o.iD)("div",Z,[(0,o._)("div",N,[J,(0,o._)("div",Y,[(0,o._)("div",U,[(0,o._)("label",null,[(0,o.wy)((0,o._)("input",{type:"radio",required:"",value:"portmone","onUpdate:modelValue":e[8]||(e[8]=t=>h.selectedPaymentMethod=t)},null,512),[[i.G2,h.selectedPaymentMethod]]),R])]),(0,o._)("div",j,[(0,o._)("button",{onClick:e[9]||(e[9]=(...t)=>P.makePayment&&P.makePayment(...t))},"Оплатити"),(0,o._)("button",{onClick:e[10]||(e[10]=(...t)=>P.closePaymentPopup&&P.closePaymentPopup(...t))},"Скасувати")])])])])):(0,o.kq)("",!0)],64)}s(7658);var K=s(3258),Q=s(5797),W=s.n(Q),X={name:"AllPodcastPage",data(){return{podcasts:[],loading:!1,dropdowns:{name:!1,filterPrice:!1},sortType:"default",allcategories:[],selectedFilterPrice:"Всі подкасти",sortDisplayNames:{default:"За замовчуванням",title:"За назвою",rating:"За популярністю"},initialPodcasts:[],playingPodcast:null,audio:new Audio,playPath:"M0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zM188.3 147.1c-7.6 4.2-12.3 12.3-12.3 20.9V344c0 8.7 4.7 16.7 12.3 20.9s16.8 4.1 24.3-.5l144-88c7.1-4.4 11.5-12.1 11.5-20.5s-4.4-16.1-11.5-20.5l-144-88c-7.4-4.5-16.7-4.7-24.3-.5z",pausePath:"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM224 192V320c0 17.7-14.3 32-32 32s-32-14.3-32-32V192c0-17.7 14.3-32 32-32s32 14.3 32 32zm128 0V320c0 17.7-14.3 32-32 32s-32-14.3-32-32V192c0-17.7 14.3-32 32-32s32 14.3 32 32z",showPaymentPopup:!1,selectedPaymentMethod:"",selectedPodcastId:null,isAuthenticated:!1}},computed:{isPlaying(){return console.log("isPlaying value from store:",this.$store.getters.isPlaying),this.$store.getters.isPlaying},playingPodcastId(){return this.$store.getters.playingPodcast.id},isPodcastFavorite(){return t=>this.$store.getters.isFavorite(t.id)}},watch:{isPlaying(t){!0===t?this.startAnimation():!1===t&&this.stopAnimation()}},methods:{openPaymentPopup(t){this.isAuthenticated?(this.selectedPodcastId=t,this.showPaymentPopup=!0):this.$router.push("/login")},closePaymentPopup(){this.selectedPodcastId=null,this.showPaymentPopup=!1},async makePayment(){const t=localStorage.getItem("token");console.log("podcast.id= "+this.selectedPodcastId);const e=this.selectedPodcastId;if("portmone"===this.selectedPaymentMethod)try{const s=await K.Z.submitPaymentPodcast(t,e,this.selectedPaymentMethod);s&&s.data&&s.data.order_link?window.location.href=s.data.order_link:s.error&&s.error.message&&"You need to login before continue"===s.error.message?W().toast({html:"Ви не авторизовані"}):console.error("Не вдалося отримати посилання для оплати")}catch(s){console.error("Помилка при оплаті:",s)}this.closePaymentPopup()},startAnimation(){console.log("start animation");const t=document.querySelector(`.podcast.id_${this.playingPodcastId}`);t&&(this.isPlaying=!this.isPlaying,this.playingPodcast=this.playingPodcastId,t.querySelector(".positions_in_block").classList.add("active"),t.classList.add("active"),t.querySelector(".context").classList.add("reversed"),t.querySelector(".play-button").classList.add("expanded"))},stopAnimation(){console.log("stop animation");const t=document.querySelector(`.podcast.id_${this.playingPodcast}`);t&&(t.querySelector(".positions_in_block").classList.remove("active"),t.classList.remove("active"),t.querySelector(".context").classList.remove("reversed"),t.querySelector(".play-button").classList.remove("expanded"),this.playingPodcast=null),console.log("stop this.playingPodcast= "+this.playingPodcast)},async handleHeartButtonClick(t){t.isFavorite=!t.isFavorite,console.log(t.isFavorite),this.$store.dispatch("toggleFavorite",t.id);const e=localStorage.getItem("token");try{const s=await K.Z.addAndRemoveToFavorite(e,t.id,`${this.$store.getters.isFavorite(t.id)}`);!0===s.data?(console.log("Операція успішна",s),this.$store.dispatch("updateIsFavoriteForPlayingPodcast",this.$store.getters.isFavorite(t.id))):s.error&&s.error.message&&"You need to login before continue"===s.error.message?W().toast({html:"Ви не авторизовані"}):console.error("Отримана неочікувана відповідь з сервера:",s)}catch(s){console.error("Помилка при додаванні або видаленні з улюблених:",s)}},stopPlayingPodcast(){const t=document.querySelector(`.podcast.id_${this.playingPodcast}`);t&&t.classList.remove("active");const e=document.querySelectorAll(".positions_in_block.active");e.forEach((t=>{t.classList.remove("active")}));const s=document.querySelectorAll(".podcast.active");s.forEach((t=>{t.classList.remove("active")}));const o=document.querySelectorAll(".context");o.forEach((t=>{t.classList.remove("reversed")}));const a=document.querySelectorAll(".play-button");a.forEach((t=>{t.classList.remove("expanded")})),this.playingPodcast=null,this.audio.removeEventListener("ended",this.stopPlayingPodcast.bind(this))},handlePlayButtonClick(t,e){if(this.playingPodcast===t.id?(this.$store.dispatch("togglePlayStatus"),this.isPlaying||this.stopPlayingPodcast(),this.playingPodcast=null):(null!==this.playingPodcast&&this.stopPlayingPodcast(),this.playingPodcast=t.id,this.$store.dispatch("updatePlayingPodcast",{imageUrl:t.image_url,author:t.author,title:t.title,duration:t.duration,id:t.id,audio_url:t.audio_url,isFavorite:t.isFavorite})),console.log("this.playingPodcast= "+this.playingPodcast),console.log("this.isPlaying= "+this.isPlaying),this.playingPodcast==t.id&&1==this.isPlaying){let t=e.target.closest(".positions_in_block");t.classList.toggle("active");let s=e.target.closest(".podcast");s.classList.toggle("active");const o=s.querySelector(".context");o.classList.toggle("reversed");const a=s.querySelector(".play-button");a.classList.toggle("expanded")}},async fetchPodcastDurations(){for(let t of this.podcasts){let e=new Audio(t.audio_url);e.addEventListener("loadedmetadata",(()=>{t.duration=this.formatTime(e.duration)}))}},formatTime(t){const e=Math.floor(t/60),s=Math.floor(t-60*e);return`${this.padZero(e)}:${this.padZero(s)}`},padZero(t){return t<10?`0${t}`:t},async toggleDropdown(t){console.log("Toggle dropdown called with:",t),this.dropdowns[t]=!this.dropdowns[t]},sortPodcasts(t){this.sortType=t,"title"===t?(console.log("Сортування по тайтл ",t),this.podcasts.sort(((t,e)=>t.title.localeCompare(e.title)))):"rating"===t?(console.log("Сортування по рейтингу ",t),this.podcasts.sort(((t,e)=>e.rating-t.rating))):"default"===t&&(console.log("Сортування за замовчуванням"),this.podcasts=JSON.parse(JSON.stringify(this.initialPodcasts)),this.podcasts.forEach((t=>t.isVisible=!0)))},filterByPriceType(t){"all"===t?(this.podcasts.forEach((t=>t.isVisible=!0)),this.selectedFilterPrice="Всі подкасти"):"free"!==t&&"paid"!==t||(this.podcasts.forEach((e=>{e.categories[0].category_type===t?e.isVisible=!0:e.isVisible=!1})),this.selectedFilterPrice="free"===t?"Безкоштовні":"Платні")},truncateTitle(t){return t.length>14?t.substring(0,14)+"...":t},applyAnimationBasedOnState(){this.isPlaying?this.startAnimation():this.stopAnimation()},closeDropdowns(){this.dropdowns.name=!1,this.dropdowns.filterPrice=!1},checkOutsideClick(t){const e=document.querySelectorAll(".dropdown-content");let s=!0;e.forEach((e=>{e.contains(t.target)&&(s=!1)})),s&&this.closeDropdowns()}},mounted(){this.applyAnimationBasedOnState(),document.addEventListener("mousedown",this.checkOutsideClick)},beforeUnmount(){document.removeEventListener("mousedown",this.checkOutsideClick)},async created(){this.loading=!0;const t=localStorage.getItem("token");this.isAuthenticated=Boolean(t);const e=await K.Z.getFavoritePodcasts(t),s=e.data?e.data.map((t=>t.id)):[];console.log(s);const o=await K.Z.AllPodcastPage();o&&o.data&&o.data.data&&(this.podcasts=o.data.data.map((t=>({...t,isVisible:!0,isFavorite:s.includes(t.id)}))),this.initialPodcasts=JSON.parse(JSON.stringify(this.podcasts)),this.sortPodcasts(this.sortType),await this.fetchPodcastDurations()),this.loading=!1}},tt=s(89);const et=(0,tt.Z)(X,[["render",G]]);var st=et}}]);
//# sourceMappingURL=113.308421c8.js.map