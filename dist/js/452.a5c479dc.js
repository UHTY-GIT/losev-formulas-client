"use strict";(self["webpackChunkvue_losev_frontend"]=self["webpackChunkvue_losev_frontend"]||[]).push([[452],{452:function(a,e,i){i.r(e),i.d(e,{default:function(){return z}});var l=i(3396),s=i(7139),t=i(9242);const r={class:"empty-layout"},d={class:"card-content"},n=(0,l._)("span",{class:"card-title"},"Реєстрація Losev Formulas",-1),o={class:"input-field"},v=(0,l._)("label",{for:"email"},"E-mail",-1),u={key:0,class:"helper-text invalid"},m={key:1,class:"helper-text invalid"},c={class:"input-field"},p=["type"],$=(0,l._)("label",{for:"password"},"Пароль",-1),w={key:0,class:"helper-text invalid"},g={key:1,class:"helper-text invalid"},y={class:"input-field"},_=(0,l._)("label",{for:"name"},"Ваше ім'я",-1),h={key:0,class:"helper-text invalid"},f=(0,l._)("span",null,"Згода на обробку персональних даних",-1),k={class:"card-action"},b=(0,l._)("div",{class:"butt_register"},[(0,l._)("button",{class:"btn waves-effect waves-light auth-submit",type:"submit"}," Зареєструватися ")],-1),C={class:"center under_butt_auth"};function q(a,e,i,q,x,H){const D=(0,l.up)("router-link");return(0,l.wg)(),(0,l.iD)("div",{class:(0,s.C_)(x.backgroundClass)},[(0,l._)("div",r,[(0,l._)("form",{class:"card auth-card",onSubmit:e[5]||(e[5]=(0,t.iM)(((...a)=>q.submitHandler&&q.submitHandler(...a)),["prevent"]))},[(0,l._)("div",d,[n,(0,l._)("div",o,[(0,l.wy)((0,l._)("input",{id:"email",type:"text","onUpdate:modelValue":e[0]||(e[0]=a=>q.email=a),class:(0,s.C_)({invalid:q.v$.email.$dirty&&q.v$.email.required.$invalid||q.v$.email.$dirty&&q.v$.email.email.$invalid,validate:q.v$.email.$dirty&&!q.v$.email.required.$invalid&&!q.v$.email.email.$invalid})},null,2),[[t.nr,q.email,void 0,{trim:!0}]]),v,q.v$.email.$dirty&&q.v$.email.required.$invalid?((0,l.wg)(),(0,l.iD)("small",u,"Поле E-mail не може бути пустим")):q.v$.email.$dirty&&q.v$.email.email.$invalid?((0,l.wg)(),(0,l.iD)("small",m,"Введіть коректний E-mail")):(0,l.kq)("",!0)]),(0,l._)("div",c,[(0,l.wy)((0,l._)("input",{id:"password",type:q.isPasswordVisible?"text":"password","onUpdate:modelValue":e[1]||(e[1]=a=>q.password=a),class:(0,s.C_)({invalid:q.v$.password.$dirty&&q.v$.password.required.$invalid||q.v$.password.$dirty&&!q.v$.password.minLength.$invalid,validate:q.v$.password.$dirty&&!q.v$.password.required.$invalid&&!q.v$.password.minLength.$invalid})},null,10,p),[[t.YZ,q.password,void 0,{trim:!0}]]),$,q.v$.password.$dirty&&q.v$.password.required.$invalid?((0,l.wg)(),(0,l.iD)("small",w,"Введіть пароль")):q.v$.password.$dirty&&q.v$.password.minLength.$invalid?((0,l.wg)(),(0,l.iD)("small",g,"Пароль повинен бути "+(0,s.zw)(q.v$.password.minLength.$params.min)+" символів. Зараз він "+(0,s.zw)(q.password.length),1)):(0,l.kq)("",!0),(0,l._)("i",{class:(0,s.C_)(["toggle-password",q.passwordIconClass]),onClick:e[2]||(e[2]=(...a)=>q.togglePassword&&q.togglePassword(...a))},null,2)]),(0,l._)("div",y,[(0,l.wy)((0,l._)("input",{id:"name",type:"text","onUpdate:modelValue":e[3]||(e[3]=a=>q.name=a),class:(0,s.C_)({invalid:q.v$.name.$dirty&&q.v$.name.required.$invalid,validate:q.v$.name.$dirty&&!q.v$.name.required.$invalid})},null,2),[[t.nr,q.name,void 0,{trim:!0}]]),_,q.v$.name.$dirty&&q.v$.name.required.$invalid?((0,l.wg)(),(0,l.iD)("small",h,"Введіть ваше ім'я")):(0,l.kq)("",!0)]),(0,l._)("p",null,[(0,l._)("label",null,[(0,l.wy)((0,l._)("input",{type:"checkbox","onUpdate:modelValue":e[4]||(e[4]=a=>x.agree=a)},null,512),[[t.e8,x.agree]]),f])])]),(0,l._)("div",k,[b,(0,l._)("p",C,[(0,l.Uk)(" Вже є аккаунт? "),(0,l.Wm)(D,{to:"/login"},{default:(0,l.w5)((()=>[(0,l.Uk)("Увійти")])),_:1})])])],32)])],2)}i(7658);var x=i(4870),H=i(4219),D=i(5420),P=i(2483),U=i(3258),L=i(5797),V=i.n(L),E={name:"RegisterPage",data(){return{backgroundClass:null,agree:!1}},setup(){const a=(0,x.iH)(""),e=(0,x.iH)(""),i=(0,x.iH)(""),l=(0,P.tv)(),s=(0,H.ZP)(),t=async()=>{if(s.value.$invalid)return s.value.$touch(),void console.log("click to submitHandler");const t={email:a.value,password:e.value,name:i.value};console.log(t);try{const s=await U.Z.registerUser(a.value,e.value,i.value);s.data.data&&s.data.data.id?(s.data.data.token&&localStorage.setItem("token",s.data.data.token),l.push("/")):V().toast({html:"Реєстрація не вдалася"})}catch(r){r.response&&422===r.response.status?r.response.data.errors.email?V().toast({html:"[Помилка]: Електронна пошта вже використовується"}):V().toast({html:"[Помилка]: Реєстрація не вдалася"}):V().toast({html:"[Помилка]: Помилка під час реєстрації:",error:r})}},r=(0,x.iH)(!1),d=(0,x.iH)("fas fa-eye-slash"),n=()=>{r.value=!r.value,r.value?d.value="fas fa-eye":d.value="fas fa-eye-slash"};return{v$:s,submitHandler:t,isPasswordVisible:r,togglePassword:n,passwordIconClass:d,email:a,password:e,name:i}},validations(){return{email:{required:D.C1,email:D.Do},password:{required:D.C1,minLength:(0,D.Ei)(6)},name:{required:D.C1},agree:{checked:a=>a}}},created(){this.backgroundClass=(0,l.f3)("backgroundClass")}},Z=i(89);const I=(0,Z.Z)(E,[["render",q]]);var z=I}}]);
//# sourceMappingURL=452.a5c479dc.js.map