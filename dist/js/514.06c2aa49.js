"use strict";(self["webpackChunkvue_losev_frontend"]=self["webpackChunkvue_losev_frontend"]||[]).push([[514],{5514:function(a,e,s){s.r(e),s.d(e,{default:function(){return I}});var i=s(3396),l=s(7139),t=s(9242);const r={class:"empty-layout"},d={class:"card-content"},n=(0,i._)("span",{class:"card-title"},"Увійти Losev Formulas",-1),o={class:"input-field"},v=(0,i._)("label",{for:"email"},"E-mail",-1),u={key:0,class:"helper-text invalid"},m={key:1,class:"helper-text invalid"},c={class:"input-field"},$=["type"],p=(0,i._)("label",{for:"password"},"Пароль",-1),w={key:0,class:"helper-text invalid"},g={key:1,class:"helper-text invalid"},y={class:"card-action"},h=(0,i._)("div",{class:"butt_login"},[(0,i._)("button",{class:"btn waves-effect waves-light auth-submit",type:"submit"}," Увійти ")],-1),_={class:"center under_butt_auth"};function k(a,e,s,k,f,b){const C=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",{class:(0,l.C_)(f.backgroundClass)},[(0,i._)("div",r,[(0,i._)("form",{class:"card auth-card",onSubmit:e[3]||(e[3]=(0,t.iM)(((...a)=>k.submitHandler&&k.submitHandler(...a)),["prevent"]))},[(0,i._)("div",d,[n,(0,i._)("div",o,[(0,i.wy)((0,i._)("input",{id:"email",type:"text","onUpdate:modelValue":e[0]||(e[0]=a=>k.email=a),class:(0,l.C_)({invalid:k.v$.email.$dirty&&k.v$.email.required.$invalid||k.v$.email.$dirty&&k.v$.email.email.$invalid,validate:k.v$.email.$dirty&&!k.v$.email.required.$invalid&&!k.v$.email.email.$invalid})},null,2),[[t.nr,k.email,void 0,{trim:!0}]]),v,k.v$.email.$dirty&&k.v$.email.required.$invalid?((0,i.wg)(),(0,i.iD)("small",u,"Поле E-mail не може бути пустим")):k.v$.email.$dirty&&k.v$.email.email.$invalid?((0,i.wg)(),(0,i.iD)("small",m,"Введіть коректний E-mail")):(0,i.kq)("",!0)]),(0,i._)("div",c,[(0,i.wy)((0,i._)("input",{id:"password",type:k.isPasswordVisible?"text":"password","onUpdate:modelValue":e[1]||(e[1]=a=>k.password=a),class:(0,l.C_)({invalid:k.v$.password.$dirty&&k.v$.password.required.$invalid||k.v$.password.$dirty&&!k.v$.password.minLength.$invalid,validate:k.v$.password.$dirty&&!k.v$.password.required.$invalid&&!k.v$.password.minLength.$invalid})},null,10,$),[[t.YZ,k.password,void 0,{trim:!0}]]),p,k.v$.password.$dirty&&k.v$.password.required.$invalid?((0,i.wg)(),(0,i.iD)("small",w,"Введіть пароль")):k.v$.password.$dirty&&k.v$.password.minLength.$invalid?((0,i.wg)(),(0,i.iD)("small",g,"Пароль повинен бути "+(0,l.zw)(k.v$.password.minLength.$params.min)+" символів. Зараз він "+(0,l.zw)(k.password.length),1)):(0,i.kq)("",!0),(0,i._)("i",{class:(0,l.C_)(["toggle-password",k.passwordIconClass]),onClick:e[2]||(e[2]=(...a)=>k.togglePassword&&k.togglePassword(...a))},null,2)])]),(0,i._)("div",y,[h,(0,i._)("p",_,[(0,i.Uk)(" Немає аккаунту? "),(0,i.Wm)(C,{to:"/register"},{default:(0,i.w5)((()=>[(0,i.Uk)("Зареєстурватися")])),_:1})])])],32)])],2)}s(7658);var f=s(4870),b=s(4219),C=s(5420),q=s(2483),H={logout:"Ви вийшли з аккаунту"},P=s(3258),x=s(5797),D=s.n(x),L={name:"loginPage",data(){return{backgroundClass:null}},setup(){const a=localStorage.removeItem("token");console.log("token now "+a);const e=(0,f.iH)(""),s=(0,f.iH)(""),i=(0,q.tv)(),l=(0,b.ZP)(),t=async()=>{if(l.value.$invalid)return l.value.$touch(),void console.log("click to submitHandler");try{const a=await P.Z.loginUser(e.value,s.value);console.log(a.data.data.token),a.data&&a.data.data.token&&(localStorage.setItem("token",a.data.data.token),i.push("/"))}catch(a){a.response&&422===a.response.status?D().toast({html:"[Помилка]: Введено невірно логін або пароль"}):D().toast({html:`[Помилка]: ${a.message||"Невідома помилка"}`})}},r=(0,f.iH)(!1),d=(0,f.iH)("fas fa-eye-slash"),n=()=>{r.value=!r.value,r.value?d.value="fas fa-eye":d.value="fas fa-eye-slash"};return{v$:l,submitHandler:t,isPasswordVisible:r,togglePassword:n,passwordIconClass:d,email:e,password:s}},validations(){return{email:{required:C.C1,email:C.Do},password:{required:C.C1,minLength:(0,C.Ei)(6)}}},created(){this.backgroundClass=(0,i.f3)("backgroundClass")},mounted(){H[this.$route.query.message]&&this.$message(H[this.$route.query.message])}},U=s(89);const E=(0,U.Z)(L,[["render",k]]);var I=E}}]);
//# sourceMappingURL=514.06c2aa49.js.map