"use strict";(self["webpackChunkvue_losev_frontend"]=self["webpackChunkvue_losev_frontend"]||[]).push([[576],{6576:function(e,s,a){a.r(s),a.d(s,{default:function(){return j}});var i=a(3396),o=a(9242),l="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAErSURBVHgB3Za/agJBEMY/Q1IkEMgb5AikTSBdrAQrn0GUEx9CQRHRXh9JrC1UUBAbrW0EOwv/DN6ct5zn7eytjX7wg2OYmY+93Zs9IJBL9Ig9cdAwIcowVCfUZBeDmjciPiQGLhcsiRxkShMLrmtKCvqcnIeZHHivdk286ZL9pSfRlGs/45KeYKeVJMnWRKS7MNlGxP4RcUptNj5LNEKxIfer38okSiWl58noWVBUJL5gpjHxS7ThTYnYlfxAP8e0pBSDFK6vJPZji1CB+Obnhm4lSaTuScUP2pj8EdVQbMb9amrQxqSHy9nlEBk1SXK6TLVkznqs2WVzst6lif7mSa9eXw7XbSTJLoI7vgCZMgju+K6wBi0kGxkD4hUGchH8VOiYw/tLeZE0PgJL7n/Pa1vJTAAAAABJRU5ErkJggg==";const r=(0,i._)("div",{class:"page_title"},[(0,i._)("p",null," Мій профіль ")],-1),n={class:"profile-content"},t={class:"logout-section"},d=(0,i._)("img",{src:l,alt:"Edit Button"},null,-1),u=(0,i._)("span",{class:"edit-link"},"Вийти з аккаунту",-1),v=[d,u];function w(e,s,a,l,d,u){const w=(0,i.up)("ProfileNameForm"),m=(0,i.up)("ProfilePasswordForm");return(0,i.wg)(),(0,i.iD)(i.HY,null,[r,(0,i._)("div",n,[(0,i.Wm)(w),(0,i.Wm)(m),(0,i._)("div",t,[(0,i._)("a",{href:"#",onClick:s[0]||(s[0]=(0,o.iM)(((...e)=>u.logout&&u.logout(...e)),["prevent"])),class:"logout-link"},v)])])],64)}a(7658);var m=a(7139),c="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAH0SURBVHgBrZU7SBxRFIb/JFulyIOQNIFkiiRNCKkCESxEK0VFRRsRH4i1CjYi4oqNvYWigiI2YmMlWIiKoCB2ovhEBREsfKOF4uM/zhn37u44u3fYA9/evWfOPf/c1xkgs+aQGXJDdkk7MmzfNfFDAk2vjKCPpIb8I+/TSHpJWske+Qx3Br+130AKSSM58AbkklOft0hFGXlDlrR/Qn5ozhL1HUXgruMUiehbjJNrpLYzMkH6dPYyppRsa84ejZuUnyFV3CAfYGdRxGZVoz4Hsb2RVvbqSVkcBbCzDkOgTX3fEgQcL/hWnTlI30yBqPpkFXb8BMKI1BoCneqTU7qgPjlAvxIH2YhkkXuNHzT8vYZwNnkXVuQP3LshsbOGv9sQqIK7TOdk2lZEBu5r3Bpil9XcG6+E5Gl/x0bEQfyJ+aL+FiRvfmiRdcTf8ma4ZcPrdyXEW4v8NJJNILmsjPiMSRJ5jWCr0HYRbi0yk86TaqRhkRTPK7WVkjOD2Gw3STEs7KXl+gv/yitiTkC+pOUKmsmF8f+O9JMxMgdLCxKR4yol/D8ZhVvaQ5mIyO38RN76PF9WbMy7qMeeQ07Xiv4vQmasXNtVzyHVMx/69aINkwFyCHv7SupIvfalEm+ZAVHYf9+DiL70JrVwj2fYxFeIv0vP9ggcK9EjIdSTZwAAAABJRU5ErkJggg==";const A={class:"input-field my_profile_input"},g=(0,i._)("label",{for:"name"},"Ім'я",-1),p={key:0,class:"helper-text invalid"},f=(0,i._)("button",{class:"name-edit",type:"submit"},[(0,i._)("img",{src:c,alt:"Edit Button"}),(0,i._)("span",{class:"edit-link"},"Змінити ім’я")],-1);function P(e,s,a,l,r,n){return(0,i.wg)(),(0,i.iD)("form",{class:"form name-update-form",onSubmit:s[1]||(s[1]=(0,o.iM)(((...e)=>l.submitUserName&&l.submitUserName(...e)),["prevent"]))},[(0,i._)("div",A,[(0,i.wy)((0,i._)("input",{id:"name",type:"text","onUpdate:modelValue":s[0]||(s[0]=e=>l.name=e),class:(0,m.C_)({invalid:l.v$.name.$dirty&&l.v$.name.required.$invalid,validate:l.v$.name.$dirty&&!l.v$.name.required.$invalid})},null,2),[[o.nr,l.name,void 0,{trim:!0}]]),g,l.v$.name.$dirty&&l.v$.name.required.$invalid?((0,i.wg)(),(0,i.iD)("small",p,"Введіть ваше ім'я")):(0,i.kq)("",!0)]),f],32)}var k=a(4870),$=a(4219),y=a(5420),h=a(3258),b=a(2483),C=a(5797),U=a.n(C),_=a(65),B={setup(){const e=(0,k.iH)(""),s=(0,$.ZP)(),a=(0,b.tv)(),i=(0,_.oR)(),o=async()=>{if(s.value.$invalid)return s.value.$touch(),void console.log("click to submitUserName");const o={name:e.value};console.log(o);const l=localStorage.getItem("token");if(!l)return console.log("Токен не знайдений. Перенаправлення на сторінку входу."),void a.push("/login");try{await h.Z.updateUserName(l,o.name),i.commit("setUsername",o.name),U().toast({html:"Ім'я успішно змінено"}),e.value=""}catch(r){console.error("Помилка при спробі змінити ім'я:",r)}};return{v$:s,submitUserName:o,name:e}},validations(){return{name:{required:y.C1}}}},I=a(89);const E=(0,I.Z)(B,[["render",P]]);var R=E;const S={class:"input-field my_profile_input"},N=["type"],V=(0,i._)("label",{for:"old-password"},"Старий пароль",-1),Y={key:0,class:"helper-text invalid"},Z={class:"input-field my_profile_input"},x=["type"],H=(0,i._)("label",{for:"new-password"},"Новий пароль",-1),T={key:0,class:"helper-text invalid"},q={key:1,class:"helper-text invalid"},L=(0,i._)("button",{class:"name-edit",type:"submit"},[(0,i._)("img",{src:c,alt:"Edit Button"}),(0,i._)("span",{class:"edit-link"},"Змінити пароль")],-1);function M(e,s,a,l,r,n){return(0,i.wg)(),(0,i.iD)("form",{class:"form password-update-form",onSubmit:s[4]||(s[4]=(0,o.iM)(((...e)=>l.submitUserPassword&&l.submitUserPassword(...e)),["prevent"]))},[(0,i._)("div",S,[(0,i.wy)((0,i._)("input",{id:"old-password",type:l.isOldPasswordVisible?"text":"password","onUpdate:modelValue":s[0]||(s[0]=e=>l.password=e),class:(0,m.C_)({invalid:l.v$.password.$dirty&&l.v$.password.required.$invalid,validate:l.v$.password.$dirty&&!l.v$.password.required.$invalid})},null,10,N),[[o.YZ,l.password,void 0,{trim:!0}]]),V,l.v$.password.$dirty&&l.v$.password.required.$invalid?((0,i.wg)(),(0,i.iD)("small",Y,"Введіть старий пароль")):(0,i.kq)("",!0),(0,i._)("i",{class:(0,m.C_)(["toggle-password user-page-password",l.OldPasswordIconClass]),onClick:s[1]||(s[1]=(...e)=>l.OldTogglePassword&&l.OldTogglePassword(...e))},null,2)]),(0,i._)("div",Z,[(0,i.wy)((0,i._)("input",{id:"new-password",type:l.isNewPasswordVisible?"text":"password","onUpdate:modelValue":s[2]||(s[2]=e=>l.newPassword=e),class:(0,m.C_)({invalid:l.v$.newPassword.$dirty&&l.v$.newPassword.required.$invalid||l.v$.newPassword.$dirty&&!l.v$.newPassword.minLength.$invalid,validate:l.v$.newPassword.$dirty&&!l.v$.newPassword.required.$invalid&&!l.v$.newPassword.minLength.$invalid})},null,10,x),[[o.YZ,l.newPassword,void 0,{trim:!0}]]),H,l.v$.newPassword.$dirty&&l.v$.newPassword.required.$invalid?((0,i.wg)(),(0,i.iD)("small",T,"Введіть новий пароль")):l.v$.newPassword.$dirty&&l.v$.newPassword.minLength.$invalid?((0,i.wg)(),(0,i.iD)("small",q,"Новий пароль повинен бути мінімум "+(0,m.zw)(l.v$.newPassword.minLength.$params.min)+" символів. Зараз він "+(0,m.zw)(l.newPassword.length),1)):(0,i.kq)("",!0),(0,i._)("i",{class:(0,m.C_)(["toggle-password user-page-password",l.NewPasswordIconClass]),onClick:s[3]||(s[3]=(...e)=>l.NewTogglePassword&&l.NewTogglePassword(...e))},null,2)]),L],32)}var O={setup(){const e=(0,k.iH)(""),s=(0,k.iH)(""),a=(0,$.ZP)(),i=(0,b.tv)(),o=async()=>{if(a.value.$invalid)return a.value.$touch(),void console.log("click to submitUserPassword");const o=localStorage.getItem("token");if(!o)return console.log("Токен не знайдений. Перенаправлення на сторінку входу."),void i.push("/login");const l=e.value,r=s.value;try{const a=await h.Z.changeUserPassword(o,l,r);U().toast({html:"Пароль успішно змінено"}),console.log("Пароль успішно змінено:",a),e.value="",s.value=""}catch(n){U().toast({html:"[Помилка]: Пароль змінити не вдалося"}),console.log("Помилка при зміні паролю:",n)}},l=(0,k.iH)(!1),r=(0,k.iH)("fas fa-eye-slash"),n=()=>{l.value=!l.value,l.value?r.value="fas fa-eye":r.value="fas fa-eye-slash"},t=(0,k.iH)(!1),d=(0,k.iH)("fas fa-eye-slash"),u=()=>{t.value=!t.value,t.value?d.value="fas fa-eye":d.value="fas fa-eye-slash"};return{v$:a,submitUserPassword:o,OldTogglePassword:n,NewTogglePassword:u,isOldPasswordVisible:l,isNewPasswordVisible:t,OldPasswordIconClass:r,NewPasswordIconClass:d,password:e,newPassword:s}},validations(){return{password:{required:y.C1},newPassword:{required:y.C1,minLength:(0,y.Ei)(6)}}}};const J=(0,I.Z)(O,[["render",M]]);var K=J,Q={name:"ProfilePage",components:{ProfileNameForm:R,ProfilePasswordForm:K},methods:{async logout(){const e=localStorage.getItem("token");console.log("remove "+e),e?(await h.Z.logoutUser(e),localStorage.removeItem("token"),this.$router.push("/login?message=logout")):(console.log("Токен не знайдений. Перенаправлення на сторінку входу."),this.$router.push("/login"))}}};const X=(0,I.Z)(Q,[["render",w]]);var j=X}}]);
//# sourceMappingURL=576.f5d5465d.js.map