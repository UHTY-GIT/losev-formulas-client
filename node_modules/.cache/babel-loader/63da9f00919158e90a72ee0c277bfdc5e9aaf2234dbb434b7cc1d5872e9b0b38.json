{"ast":null,"code":"import { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, normalizeStyle as _normalizeStyle } from \"vue\";\nconst _hoisted_1 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"page_title\"\n}, [/*#__PURE__*/_createElementVNode(\"p\", null, \" Збереження \")], -1 /* HOISTED */);\nconst _hoisted_2 = {\n  class: \"block_content_podcast\"\n};\nconst _hoisted_3 = {\n  class: \"positions_in_block\"\n};\nconst _hoisted_4 = {\n  class: \"upper_tittle\"\n};\nconst _hoisted_5 = {\n  class: \"context\"\n};\nconst _hoisted_6 = /*#__PURE__*/_createElementVNode(\"svg\", {\n  class: \"play-icon\",\n  xmlns: \"http://www.w3.org/2000/svg\",\n  height: \"1em\",\n  viewBox: \"0 0 512 512\"\n}, [/*#__PURE__*/_createElementVNode(\"path\", {\n  class: \"play-path\",\n  d: \"M0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zM188.3 147.1c-7.6 4.2-12.3 12.3-12.3 20.9V344c0 8.7 4.7 16.7 12.3 20.9s16.8 4.1 24.3-.5l144-88c7.1-4.4 11.5-12.1 11.5-20.5s-4.4-16.1-11.5-20.5l-144-88c-7.4-4.5-16.7-4.7-24.3-.5z\"\n})], -1 /* HOISTED */);\nconst _hoisted_7 = [_hoisted_6];\nconst _hoisted_8 = {\n  class: \"info_podcast\"\n};\nconst _hoisted_9 = {\n  class: \"title_podcast\"\n};\nconst _hoisted_10 = {\n  class: \"author_podcast\"\n};\nconst _hoisted_11 = /*#__PURE__*/_createElementVNode(\"span\", {\n  class: \"time_podcast\"\n}, \" 55:15 \", -1 /* HOISTED */);\nconst _hoisted_12 = {\n  class: \"under_title\"\n};\nconst _hoisted_13 = {\n  class: \"rating_and_categories\"\n};\nconst _hoisted_14 = {\n  class: \"podcast-rating\"\n};\nconst _hoisted_15 = {\n  class: \"categories_podcast\"\n};\nconst _hoisted_16 = [\"onClick\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(_Fragment, null, [_hoisted_1, _createElementVNode(\"div\", _hoisted_2, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.podcasts, podcast => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: podcast.id,\n      class: _normalizeClass(['podcast', `id_${podcast.id}`]),\n      style: _normalizeStyle({\n        backgroundImage: `url(${podcast.image_url})`,\n        backgroundRepeat: 'no-repeat',\n        backgroundPosition: 'center'\n      })\n    }, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"button\", {\n      class: \"play-button\",\n      \"aria-label\": \"Play podcast\",\n      onClick: _cache[0] || (_cache[0] = (...args) => $options.handlePlayButtonClick && $options.handlePlayButtonClick(...args))\n    }, _hoisted_7), _createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"span\", _hoisted_9, _toDisplayString($options.truncateTitle(podcast.title)), 1 /* TEXT */), _createElementVNode(\"span\", _hoisted_10, _toDisplayString(podcast.author), 1 /* TEXT */)])]), _hoisted_11]), _createElementVNode(\"div\", _hoisted_12, [_createElementVNode(\"div\", _hoisted_13, [_createElementVNode(\"div\", _hoisted_14, _toDisplayString(podcast.rating), 1 /* TEXT */), _createElementVNode(\"span\", _hoisted_15, _toDisplayString(podcast.categories[0].name), 1 /* TEXT */)]), _createElementVNode(\"button\", {\n      class: _normalizeClass(['heart-button', podcast.isFavorite ? 'active' : '']),\n      \"aria-label\": \"favorite\",\n      onClick: $event => $options.handleHeartButtonClick(podcast, $event)\n    }, null, 10 /* CLASS, PROPS */, _hoisted_16)])])], 6 /* CLASS, STYLE */);\n  }), 128 /* KEYED_FRAGMENT */))])], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["_createElementVNode","class","xmlns","height","viewBox","d","_hoisted_6","_hoisted_1","_hoisted_2","_createElementBlock","_Fragment","_renderList","$data","podcasts","podcast","key","id","_normalizeClass","style","_normalizeStyle","backgroundImage","image_url","backgroundRepeat","backgroundPosition","_hoisted_3","_hoisted_4","_hoisted_5","onClick","_cache","args","$options","handlePlayButtonClick","_hoisted_8","_hoisted_9","_toDisplayString","truncateTitle","title","_hoisted_10","author","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","rating","_hoisted_15","categories","name","isFavorite","$event","handleHeartButtonClick"],"sources":["C:\\Users\\Denys\\WebstormProjects\\losev-formulas-client\\src\\views\\MySaved.vue"],"sourcesContent":["<template>\r\n  <div class=\"page_title\">\r\n    <p>\r\n      Збереження\r\n    </p>\r\n  </div>\r\n  <div class=\"block_content_podcast\">\r\n    <div\r\n        v-for=\"podcast in podcasts\"\r\n        :key=\"podcast.id\"\r\n        :class=\"['podcast', `id_${podcast.id}`]\"\r\n        :style=\"{ backgroundImage: `url(${podcast.image_url})`, backgroundRepeat: 'no-repeat', backgroundPosition: 'center' }\"\r\n    >\r\n      <div class=\"positions_in_block\">\r\n        <div class=\"upper_tittle\">\r\n          <div class=\"context\">\r\n            <button class=\"play-button\" aria-label=\"Play podcast\" @click=\"handlePlayButtonClick\">\r\n              <svg class=\"play-icon\" xmlns=\"http://www.w3.org/2000/svg\" height=\"1em\" viewBox=\"0 0 512 512\">\r\n                <path class=\"play-path\" d=\"M0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zM188.3 147.1c-7.6 4.2-12.3 12.3-12.3 20.9V344c0 8.7 4.7 16.7 12.3 20.9s16.8 4.1 24.3-.5l144-88c7.1-4.4 11.5-12.1 11.5-20.5s-4.4-16.1-11.5-20.5l-144-88c-7.4-4.5-16.7-4.7-24.3-.5z\"/>\r\n              </svg>\r\n            </button>\r\n            <div class=\"info_podcast\">\r\n                  <span class=\"title_podcast\">\r\n                    {{ truncateTitle(podcast.title) }}\r\n                  </span>\r\n              <span class=\"author_podcast\">\r\n                    {{ podcast.author }}\r\n                  </span>\r\n            </div>\r\n          </div>\r\n          <span class=\"time_podcast\">\r\n                55:15\r\n              </span>\r\n        </div>\r\n        <div class=\"under_title\">\r\n          <div class=\"rating_and_categories\">\r\n            <div class=\"podcast-rating\">{{ podcast.rating }}</div>\r\n            <span class=\"categories_podcast\">{{ podcast.categories[0].name }}</span>\r\n          </div>\r\n          <button\r\n              :class=\"['heart-button', podcast.isFavorite ? 'active' : '']\"\r\n              aria-label=\"favorite\"\r\n              @click=\"handleHeartButtonClick(podcast, $event)\"\r\n          ></button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport apiService from '@/services/apiService.js';\r\n\r\nexport default {\r\n  name: \"MyFavoritePodcastPage\",\r\n  data() {\r\n    return {\r\n      podcasts: [],\r\n      loading: false,\r\n    }\r\n  },\r\n  methods: {\r\n    // Метод для анімації кнопки лайку на блоці постів\r\n    async handleHeartButtonClick(podcast, event) {\r\n      podcast.isFavorite = !podcast.isFavorite;\r\n      console.log(podcast.isFavorite);\r\n\r\n      event.target.classList.toggle('active');\r\n\r\n      const token = localStorage.getItem('token');\r\n\r\n      try {\r\n        const response = await apiService.addAndRemoveToFavorite(token, podcast.id, `${podcast.isFavorite}`);\r\n\r\n        if(response.data === true) {\r\n          console.log('Операція успішна', response);\r\n        } else {\r\n          console.error('Отримана неочікувана відповідь з сервера:', response);\r\n        }\r\n      } catch (error) {\r\n        console.error('Помилка при додаванні або видаленні з улюблених:', error);\r\n      }\r\n    },\r\n    // Метод для анімації кнопки плей у блоці підкастів\r\n    handlePlayButtonClick(event) {\r\n      let podcastBlock = event.target.closest('.positions_in_block');\r\n      podcastBlock.classList.toggle('active');\r\n\r\n      let podcastElement = event.target.closest('.podcast');\r\n      podcastElement.classList.toggle('active');\r\n\r\n      const contextElement = podcastElement.querySelector('.context');\r\n      contextElement.classList.toggle('reversed');\r\n\r\n      const PlayElement = podcastElement.querySelector('.play-button');\r\n      PlayElement.classList.toggle('expanded');\r\n\r\n      let playPath = event.target.querySelector('.play-path');\r\n      if (playPath) {\r\n        if (podcastBlock.classList.contains('active')) {\r\n          // Якщо відтворення, то змінюємо форму на \"pause\"\r\n          playPath.setAttribute('d', 'M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM224 192V320c0 17.7-14.3 32-32 32s-32-14.3-32-32V192c0-17.7 14.3-32 32-32s32 14.3 32 32zm128 0V320c0 17.7-14.3 32-32 32s-32-14.3-32-32V192c0-17.7 14.3-32 32-32s32 14.3 32 32z');\r\n        } else {\r\n          // Якщо пауза, то змінюємо форму на \"play\"\r\n          playPath.setAttribute('d', 'M0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zM188.3 147.1c-7.6 4.2-12.3 12.3-12.3 20.9V344c0 8.7 4.7 16.7 12.3 20.9s16.8 4.1 24.3-.5l144-88c7.1-4.4 11.5-12.1 11.5-20.5s-4.4-16.1-11.5-20.5l-144-88c-7.4-4.5-16.7-4.7-24.3-.5z');\r\n        }\r\n      }\r\n    },\r\n    //Метод для обрізання довгих назв подкастів\r\n    truncateTitle(title) {\r\n      if (title.length > 14) {\r\n        return title.substring(0, 14) + '...';\r\n      }\r\n      return title;\r\n    }\r\n  },\r\n  async created() {\r\n    this.loading = true;\r\n\r\n    const token = localStorage.getItem('token');\r\n    // отримання даних всіх подкастів\r\n    const responseFavoritePodcast = await apiService.getFavoritePodcasts(token);\r\n\r\n    if (responseFavoritePodcast && responseFavoritePodcast.data) {\r\n      // Додавання isFavorite=true для всіх подкастів\r\n      this.podcasts = responseFavoritePodcast.data.map(podcast => ({\r\n        ...podcast,\r\n        isFavorite: true\r\n      }));\r\n      console.log(this.podcasts);\r\n    }\r\n  }\r\n}\r\n</script>"],"mappings":";gCACEA,mBAAA,CAIM;EAJDC,KAAK,EAAC;AAAY,I,aACrBD,mBAAA,CAEI,WAFD,cAEH,E;;EAEGC,KAAK,EAAC;AAAuB;;EAOzBA,KAAK,EAAC;AAAoB;;EACxBA,KAAK,EAAC;AAAc;;EAClBA,KAAK,EAAC;AAAS;gCAEhBD,mBAAA,CAEM;EAFDC,KAAK,EAAC,WAAW;EAACC,KAAK,EAAC,4BAA4B;EAACC,MAAM,EAAC,KAAK;EAACC,OAAO,EAAC;iBAC7EJ,mBAAA,CAA8P;EAAxPC,KAAK,EAAC,WAAW;EAACI,CAAC,EAAC;;oBAD5BC,UAEM,C;;EAEHL,KAAK,EAAC;AAAc;;EACbA,KAAK,EAAC;AAAe;;EAGzBA,KAAK,EAAC;AAAgB;iCAKhCD,mBAAA,CAEW;EAFLC,KAAK,EAAC;AAAc,GAAC,SAEvB;;EAEDA,KAAK,EAAC;AAAa;;EACjBA,KAAK,EAAC;AAAuB;;EAC3BA,KAAK,EAAC;AAAgB;;EACrBA,KAAK,EAAC;AAAoB;;;6DApC1CM,UAIM,EACNP,mBAAA,CAyCM,OAzCNQ,UAyCM,I,kBAxCJC,mBAAA,CAuCMC,SAAA,QAAAC,WAAA,CAtCgBC,KAAA,CAAAC,QAAQ,EAAnBC,OAAO;yBADlBL,mBAAA,CAuCM;MArCDM,GAAG,EAAED,OAAO,CAACE,EAAE;MACff,KAAK,EAAAgB,eAAA,mBAAoBH,OAAO,CAACE,EAAE;MACnCE,KAAK,EAAAC,eAAA;QAAAC,eAAA,SAA4BN,OAAO,CAACO,SAAS;QAAAC,gBAAA;QAAAC,kBAAA;MAAA;QAErDvB,mBAAA,CAgCM,OAhCNwB,UAgCM,GA/BJxB,mBAAA,CAmBM,OAnBNyB,UAmBM,GAlBJzB,mBAAA,CAcM,OAdN0B,UAcM,GAbJ1B,mBAAA,CAIS;MAJDC,KAAK,EAAC,aAAa;MAAC,YAAU,EAAC,cAAc;MAAE0B,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEC,QAAA,CAAAC,qBAAA,IAAAD,QAAA,CAAAC,qBAAA,IAAAF,IAAA,CAAqB;oBAKnF7B,mBAAA,CAOM,OAPNgC,UAOM,GANAhC,mBAAA,CAEO,QAFPiC,UAEO,EAAAC,gBAAA,CADFJ,QAAA,CAAAK,aAAa,CAACrB,OAAO,CAACsB,KAAK,mBAEpCpC,mBAAA,CAEW,QAFXqC,WAEW,EAAAH,gBAAA,CADFpB,OAAO,CAACwB,MAAM,iB,KAI3BC,WAEW,C,GAEbvC,mBAAA,CAUM,OAVNwC,WAUM,GATJxC,mBAAA,CAGM,OAHNyC,WAGM,GAFJzC,mBAAA,CAAsD,OAAtD0C,WAAsD,EAAAR,gBAAA,CAAvBpB,OAAO,CAAC6B,MAAM,kBAC7C3C,mBAAA,CAAwE,QAAxE4C,WAAwE,EAAAV,gBAAA,CAApCpB,OAAO,CAAC+B,UAAU,IAAIC,IAAI,iB,GAEhE9C,mBAAA,CAIU;MAHLC,KAAK,EAAAgB,eAAA,kBAAmBH,OAAO,CAACiC,UAAU;MAC3C,YAAU,EAAC,UAAU;MACpBpB,OAAK,EAAAqB,MAAA,IAAElB,QAAA,CAAAmB,sBAAsB,CAACnC,OAAO,EAAEkC,MAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}