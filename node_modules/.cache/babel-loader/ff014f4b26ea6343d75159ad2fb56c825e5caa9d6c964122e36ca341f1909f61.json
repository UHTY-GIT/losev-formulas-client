{"ast":null,"code":"import apiService from '@/services/apiService.js';\nimport { ref } from 'vue';\nexport default {\n  name: \"AllPodcastPage\",\n  data() {\n    return {\n      podcasts: [],\n      loading: false,\n      dropdowns: {\n        name: false,\n        category: false\n      },\n      sortType: 'title',\n      allcategories: [],\n      selectedCategory: 'Всі подкасти',\n      sortDisplayNames: {\n        'title': 'За назвою',\n        'rating': 'За популярністю'\n      },\n      dropdownContentRef: ref(null),\n      selectedItemNameRef: ref(null),\n      selectedItemCategoryRef: ref(null)\n    };\n  },\n  methods: {\n    async toggleDropdown(type) {\n      console.log(\"Toggle dropdown called with:\", type);\n      this.dropdowns[type] = !this.dropdowns[type];\n\n      // Додаємо слухач на сторінку, щоб бачити коли є клік за межі блоку з випадаючим списком\n      if (this.dropdowns[type]) {\n        // Якщо відкрито випадаюче меню\n        document.addEventListener('click', this.outsideClick);\n      } else {\n        // Якщо закрито\n        document.removeEventListener('click', this.outsideClick);\n      }\n    },\n    // Метод що виконує дії після кліку за межі блоку dropdown-content\n    outsideClick(event) {\n      const dropdownName = this.dropdowns.name ? 'name' : 'category';\n      const dropdownEl = this.$el.querySelector('.dropdown-content');\n      const selectedEl = this.$el.querySelector(`.selected-item-${dropdownName}`);\n      if (dropdownEl && !dropdownEl.contains(event.target) && !selectedEl.contains(event.target)) {\n        this.dropdowns[dropdownName] = false;\n        document.removeEventListener('click', this.outsideClick);\n      }\n    },\n    // Сортування за рейтингом і назвою\n    sortPodcasts(type) {\n      this.sortType = type;\n      if (type === 'title') {\n        console.log(\"Сортування по тайтл \", type);\n        this.podcasts.sort((a, b) => a.title.localeCompare(b.title));\n      } else if (type === 'rating') {\n        console.log(\"Сортування по рейтингу \", type);\n        this.podcasts.sort((a, b) => b.rating - a.rating); // assuming higher rating is better\n      }\n    },\n\n    // Фільтр по категоріям\n    filterPodcasts(categoryName) {\n      if (categoryName === 'all') {\n        this.podcasts.forEach(p => p.isVisible = true);\n        this.selectedCategory = 'Всі подкасти'; // Оновлюємо selectedCategory\n      } else {\n        this.podcasts.forEach(podcast => {\n          if (podcast.categories[0].name === categoryName) {\n            podcast.isVisible = true;\n          } else {\n            podcast.isVisible = false;\n          }\n        });\n        this.selectedCategory = categoryName; // Оновлюємо selectedCategory\n      }\n    }\n  },\n\n  async created() {\n    this.loading = true;\n\n    // отримання даних всіх подкастів\n    const responseAllPodcast = await apiService.AllPodcastPage();\n    // this.podcasts = responseAllPodcast.data.data;\n    this.podcasts = responseAllPodcast.data.data.map(podcast => ({\n      ...podcast,\n      isVisible: true\n    }));\n    console.log(this.podcasts);\n\n    // Отримання даних всіх категорій\n    const responseCategories = await apiService.allCategories();\n    this.allcategories = responseCategories.data.data;\n    console.log(this.allcategories);\n\n    // Ініціалізація методу сортування\n    this.sortPodcasts(this.sortType);\n  }\n};","map":{"version":3,"names":["apiService","ref","name","data","podcasts","loading","dropdowns","category","sortType","allcategories","selectedCategory","sortDisplayNames","dropdownContentRef","selectedItemNameRef","selectedItemCategoryRef","methods","toggleDropdown","type","console","log","document","addEventListener","outsideClick","removeEventListener","event","dropdownName","dropdownEl","$el","querySelector","selectedEl","contains","target","sortPodcasts","sort","a","b","title","localeCompare","rating","filterPodcasts","categoryName","forEach","p","isVisible","podcast","categories","created","responseAllPodcast","AllPodcastPage","map","responseCategories","allCategories"],"sources":["C:\\Users\\Denys\\WebstormProjects\\losev-formulas-client\\src\\views\\AllPodcast.vue"],"sourcesContent":["<template>\r\n  <div class=\"page_title\">\r\n    <p>\r\n      Всі подкасти\r\n    </p>\r\n  </div>\r\n  <div class=\"all-podcast-block\">\r\n    <div class=\"dropdown-container\">\r\n      <div class=\"dropdown\">\r\n        <span>Сортування:</span>\r\n        <div class=\"selected-item-name\" @click=\"toggleDropdown('name')\">\r\n          <span>{{ sortDisplayNames[sortType] }}</span>\r\n          <a :class=\"['arrow-icon', { 'open': dropdowns.name }]\">\r\n            <span class=\"left-bar\"></span>\r\n            <span class=\"right-bar\"></span>\r\n\t\t\t\t\t</a>\r\n        </div>\r\n        <div class=\"dropdown-content\" ref=\"dropdownContent\" v-show=\"dropdowns.name\">\r\n          <a href=\"#\" @click=\"sortPodcasts('title')\">За назвою</a>\r\n          <a href=\"#\" @click=\"sortPodcasts('rating')\">За популярністю</a>\r\n        </div>\r\n      </div>\r\n      <div class=\"dropdown\">\r\n        <span>Фільтр:</span>\r\n        <div class=\"selected-item-category\" @click=\"toggleDropdown('category')\">\r\n          <span class=\"selected-item\">{{ selectedCategory }}</span>\r\n          <a :class=\"['arrow-icon', { 'open': dropdowns.category }]\">\r\n            <span class=\"left-bar\"></span>\r\n            <span class=\"right-bar\"></span>\r\n          </a>\r\n        </div>\r\n        <div class=\"dropdown-content dropdown-category\" ref=\"selectedItemName\" v-show=\"dropdowns.category\">\r\n          <a href=\"#\" @click=\"filterPodcasts('all')\">Всі подкасти</a>\r\n          <a\r\n              v-for=\"category in allcategories\"\r\n              :key=\"category.name\"\r\n              href=\"#\"\r\n              @click=\"filterPodcasts(category.name)\"\r\n          >\r\n            {{ category.name }}\r\n          </a>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"block_content_podcast\">\r\n      <div\r\n          v-for=\"podcast in podcasts\"\r\n          :key=\"podcast.id\"\r\n          :class=\"['podcast', `id_${podcast.id}`]\"\r\n          :style=\"{ backgroundImage: `url(${podcast.image_url})`, backgroundRepeat: 'no-repeat', backgroundPosition: 'center' }\"\r\n          v-show=\"podcast.isVisible\"\r\n      >\r\n        <div class=\"positions_in_block\">\r\n          <div class=\"upper_tittle\">\r\n            <div class=\"context\">\r\n              <button class=\"play-button\" aria-label=\"Play podcast\">\r\n                <svg class=\"play-icon\" xmlns=\"http://www.w3.org/2000/svg\" height=\"1em\" viewBox=\"0 0 512 512\">\r\n                  <path class=\"play-path\" d=\"M0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zM188.3 147.1c-7.6 4.2-12.3 12.3-12.3 20.9V344c0 8.7 4.7 16.7 12.3 20.9s16.8 4.1 24.3-.5l144-88c7.1-4.4 11.5-12.1 11.5-20.5s-4.4-16.1-11.5-20.5l-144-88c-7.4-4.5-16.7-4.7-24.3-.5z\"/>\r\n                </svg>\r\n              </button>\r\n              <div class=\"info_podcast\">\r\n                  <span class=\"title_podcast\">\r\n                    {{ podcast.title }}\r\n                  </span>\r\n                <span class=\"author_podcast\">\r\n                    {{ podcast.description }}\r\n                  </span>\r\n              </div>\r\n            </div>\r\n            <span class=\"time_podcast\">\r\n                55:15\r\n              </span>\r\n          </div>\r\n          <div class=\"under_title\">\r\n            <div class=\"rating_and_categories\">\r\n              <div class=\"podcast-rating\">3</div>\r\n              <span class=\"categories_podcast\">{{ podcast.categories[0].name }}</span>\r\n            </div>\r\n            <button class=\"heart-button\" aria-label=\"favorite\"></button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport apiService from '@/services/apiService.js';\r\nimport { ref } from 'vue';\r\n\r\nexport default {\r\n  name: \"AllPodcastPage\",\r\n  data() {\r\n    return {\r\n      podcasts: [],\r\n      loading: false,\r\n      dropdowns: {\r\n        name: false,\r\n        category: false\r\n      },\r\n      sortType: 'title',\r\n      allcategories: [],\r\n      selectedCategory: 'Всі подкасти',\r\n      sortDisplayNames: {\r\n        'title': 'За назвою',\r\n        'rating': 'За популярністю'\r\n      },\r\n      dropdownContentRef: ref(null),\r\n      selectedItemNameRef: ref(null),\r\n      selectedItemCategoryRef: ref(null),\r\n    };\r\n  },\r\n  methods: {\r\n    async toggleDropdown(type) {\r\n      console.log(\"Toggle dropdown called with:\", type);\r\n      this.dropdowns[type] = !this.dropdowns[type];\r\n\r\n      // Додаємо слухач на сторінку, щоб бачити коли є клік за межі блоку з випадаючим списком\r\n      if (this.dropdowns[type]) { // Якщо відкрито випадаюче меню\r\n        document.addEventListener('click', this.outsideClick);\r\n      } else { // Якщо закрито\r\n        document.removeEventListener('click', this.outsideClick);\r\n      }\r\n    },\r\n    // Метод що виконує дії після кліку за межі блоку dropdown-content\r\n    outsideClick(event) {\r\n      const dropdownName = this.dropdowns.name ? 'name' : 'category';\r\n      const dropdownEl = this.$el.querySelector('.dropdown-content');\r\n      const selectedEl = this.$el.querySelector(`.selected-item-${dropdownName}`);\r\n\r\n      if (dropdownEl && !dropdownEl.contains(event.target) && !selectedEl.contains(event.target)) {\r\n        this.dropdowns[dropdownName] = false;\r\n        document.removeEventListener('click', this.outsideClick);\r\n      }\r\n    },\r\n    // Сортування за рейтингом і назвою\r\n    sortPodcasts(type) {\r\n      this.sortType = type;\r\n      if (type === 'title') {\r\n        console.log(\"Сортування по тайтл \", type);\r\n        this.podcasts.sort((a, b) => a.title.localeCompare(b.title));\r\n      } else if (type === 'rating') {\r\n        console.log(\"Сортування по рейтингу \", type);\r\n        this.podcasts.sort((a, b) => b.rating - a.rating);  // assuming higher rating is better\r\n      }\r\n    },\r\n    // Фільтр по категоріям\r\n    filterPodcasts(categoryName) {\r\n      if (categoryName === 'all') {\r\n        this.podcasts.forEach(p => p.isVisible = true);\r\n        this.selectedCategory = 'Всі подкасти';  // Оновлюємо selectedCategory\r\n      } else {\r\n        this.podcasts.forEach(podcast => {\r\n          if (podcast.categories[0].name === categoryName) {\r\n            podcast.isVisible = true;\r\n          } else {\r\n            podcast.isVisible = false;\r\n          }\r\n        });\r\n        this.selectedCategory = categoryName;  // Оновлюємо selectedCategory\r\n      }\r\n    }\r\n  },\r\n  async created() {\r\n    this.loading = true;\r\n\r\n    // отримання даних всіх подкастів\r\n    const responseAllPodcast = await apiService.AllPodcastPage();\r\n    // this.podcasts = responseAllPodcast.data.data;\r\n    this.podcasts = responseAllPodcast.data.data.map(podcast => ({ ...podcast, isVisible: true }));\r\n\r\n    console.log(this.podcasts);\r\n\r\n    // Отримання даних всіх категорій\r\n    const responseCategories = await apiService.allCategories();\r\n    this.allcategories = responseCategories.data.data;\r\n\r\n    console.log(this.allcategories);\r\n\r\n    // Ініціалізація методу сортування\r\n    this.sortPodcasts(this.sortType);\r\n  }\r\n}\r\n</script>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}